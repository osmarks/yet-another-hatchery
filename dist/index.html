<html>
  <head>
    <link rel="stylesheet" href="/style.css">
  </head>
  <body>
    <script src="/elm.js"></script>
    <script>
      if ("fetch" in window) {
        var app = Elm.Main.init({node: document.body});
        if (app.ports) {
          app.ports.viewDragon.subscribe(function(code) {
            console.log("viewing", code)
            fetch("https://dragcave.net/image/" + code, {mode: "no-cors"}).then(() => console.log("viewed", code))
          });
        }
      } else {
        var warn = document.createElement("div");
        warn.innerHTML = "This cannot run in your ancient browser. A browser which supports 'fetch' (see <a href='https://caniuse.com/#feat=fetch'>here</a>) is required so that eggs can be viewed using SlightlyFasterViewingâ„¢.";
        document.body.style.textAlign = "center";
        document.body.style.paddingTop = "25vh";
        document.body.style.fontSize = "2em";
        document.body.appendChild(warn);
      }
    </script>
  </body>
</html>